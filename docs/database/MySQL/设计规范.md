<!-- TOC -->
- [1.引擎规范](1.引擎规范)
- [2.编码规范](2.编码规范)
- [3.表设计规范](3.表设计规范)
- [4.字段设计规范](4.字段设计规范)
- [5.命名规则](5.命名规则)
- [6.建表示例](6.建表示例)
<!-- /TOC -->

## 1.引擎规范

非特殊情况下，默认选择Innodb，支持事务、行级锁，并发性能更好。

## 2.编码规范

UTF-8

## 3.表设计规范

1. 必须要有主键：主键递增，可提高写入性能，减少碎片
2. 禁止使用外键：降低表之间的耦合，不要涉及更新操作的级联，并发高情况极度影响SQL性能。

## 4.字段设计规范

1. 必须要有注释：包括表注释以及字段注释
2. 必须Not NULL：null的列不能使用索引，部分字段根据具体情况设置默认值
3. 禁止使用text\blob：浪费磁盘和内存空间，影响数据库性能
4. 金额禁止使用小数存储：尽量使用分或者更小的单位用整数存储，否则精度的问题会很麻烦

## 5.命名规则

### 5.1.表、列

使用业务模块开头，如tb_order，列名以下划线分割

### 5.2.索引

create_time、update_time必须包含索引

- 主键索引：数据库自动
- 唯一索引、组合唯一索引：uk_colName_colName
- 普通索引、组合普通索引：idx_colName_colName

## 6.建表示例

```
CREATE TABLE `user` (
  `id` int unsigned NOT NULL AUTO_INCREMENT,
  `username` varchar(128) NOT NULL DEFAULT '' COMMENT '用户名',
​  `cert_no` varchar(64) NOT NULL DEFAULT '' COMMENT '身份证号',
  `gender` tinyint NOT NULL DEFAULT '0' COMMENT '性别0女1男',
  `active_date` date NOT NULL DEFAULT '1970-01-01' COMMENT '激活时间',
  `inactive_time` datetime NOT NULL DEFAULT '1970-01-01 08:00:01' COMMENT '失效时间',
  `create_time` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
  `update_time` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',
  PRIMARY KEY (`id`),
  UNIQUE KEY `idx_cert_no` (`cert_no`) USING BTREE,
  KEY `idx_username_gender` (`username`,`gender`) USING BTREE
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

```